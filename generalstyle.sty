%%%%% PACKAGES

\usepackage[backend=biber, style=alphabetic, dateabbrev=false, urldate=long]{biblatex} % bibliography
\usepackage{fontspec} % font stuff (needed?)
\usepackage{gitinfo2} % including git information on the title page
\usepackage[original]{imakeidx} % for the index, load before hyperref

% using EB Garamond as the mainfont, with ebgaramond-maths for maths
% (donâ€™t confuse ebgaramond-maths with garamond-math)
\usepackage[cmbraces]{newtxmath}
\usepackage{ebgaramond-maths}
\setmainfont{EB Garamond}

% undefine openbox from nextxmath, as amsmath defines it again
\let\openbox\undefined

\usepackage{appendix}   % the appendix
\usepackage{csquotes}
\usepackage{enumitem}   % for better enumerates
\usepackage{lastpage}   % to be able to refer to the last page
\usepackage{microtype}  % microtypography
\usepackage{luatexbase} % fix for microtype, see https://tex.stackexchange.com/questions/476740/
\usepackage[automark, headsepline, autooneside=false]{scrlayer-scrpage}  % header design

\usepackage{mathtools, amssymb, amsthm} % general math stuff
% \usepackage{arydshln}   % allowing dashed lines in arrays
\usepackage{extarrows}  % \xlongequal
% \usepackage{stmaryrd}   % \mapsfrom
\usepackage{tikz-cd} % commutative diagrams
\usetikzlibrary{positioning} % for better positioning of nodes relative to each other

\usepackage[colorlinks=true]{hyperref} % hyperlinks

% the following are to be loaded after hyperref
\usepackage[symbols, sort=use, style=long3col]{glossaries-extra} % list of symbols
\usepackage[capitalise,noabbrev]{cleveref}  % smarter referencing





%%%%% CONFIGURATION & STYLE
  
% the file containing the references for biblatex
\bibliography{references.bib}

% index and glossary
\makeindex
\makenoidxglossaries

% big penalties to prevent thingsk
\binoppenalty=\maxdimen         % breaking of binary operators
\relpenalty=\maxdimen           % breaking of relation symbols
\widowpenalty=\maxdimen         % widows
\displaywidowpenalty=\maxdimen  % orphans


% fonts for titlepage
\setkomafont{publishers}{\normalsize}
 
% header design with scrlayer-scrpage
\ihead{\leftmark}
\chead{}
\ohead{\rightmark}

% dont number subsubsections
\setcounter{secnumdepth}{1}


% colours for hyperref
\hypersetup{
    colorlinks,
    linkcolor={green!35!black},
    citecolor={blue!50!black},
    urlcolor={blue!80!black}
}

% definition of new counters and changes of already existing ones
\newcounter{everything}[section]  % to be used for all kind of math enviroments

% theorem-like enviroments
\theoremstyle{definition}
\newtheorem{proposition}[everything]{Proposition}
\newtheorem{lemma}[everything]{Lemma}
\newtheorem{theorem}[everything]{Theorem}
\newtheorem{corollary}[everything]{Corollary}
\newtheorem*{claim*}{Claim} % unnumbered version
\newtheorem{claim}{Claim}[everything] % numbered version, numbering is only local

% text-like enviroments
\newtheorem{definition}[everything]{Definition}
\newtheorem{example}[everything]{Example}
\newtheorem{examples}[everything]{Examples}
\newtheorem{recall}[everything]{Recall}
\newtheorem{remark}[everything]{Remark}

% printing of counter numbers
\renewcommand{\theeverything}{\thesection.\arabic{everything}}
\renewcommand{\theequation}{\arabic{equation}}
\renewcommand{\theclaim}{\arabic{claim}}

% style of enumerating lists
\setlist[enumerate, 1]{leftmargin=*, align=left, label=\arabic*)}
\setlist[enumerate, 2]{leftmargin=*, align=left, label=\alph*)}
\setlist[description, 1]{leftmargin=\labelwidth, font=\normalfont}
\setlist[description, 2]{leftmargin=\labelwidth, font=\normalfont}
\setlist[itemize, 1]{leftmargin=*}
\setlist[itemize, 2]{leftmargin=*, label={\textopenbullet}}
\setlist[itemize, 3]{leftmargin=*}

% text shortcuts
\newcommand{\defemph}{\emph}

% text shortcuts involving nobreakdash
\newcommand{\algebra}[1]{#1\nobreakdash-algebra}
\newcommand{\bilinear}[1]{#1\nobreakdash-bilinear}
\newcommand{\liealgebra}[1]{#1\nobreakdash-Lie~algebra}
\newcommand{\linear}[1]{#1\nobreakdash-linear}
\newcommand{\subalgebra}[1]{#1\nobreakdash-subalgebra}
\newcommand{\vectorspace}[1]{#1\nobreakdash-vector space}




%%%%% MATH STUFF

% numbers and fields
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Cbb}{\mathbb{Cbb}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\kf}{\mathbf{k}}

% lie algebras
\newcommand{\clie}{\mathfrak{c}}
\newcommand{\glie}{\mathfrak{g}}
\newcommand{\hlie}{\mathfrak{h}}
\newcommand{\gllie}{\mathfrak{gl}}
\newcommand{\sllie}{\mathfrak{sl}}
\newcommand{\tlie}{\mathfrak{t}}
\newcommand{\nlie}{\mathfrak{n}}
\newcommand{\looplie}{\mathcal{L}}

% categories
\newcommand{\catname}[1]{\mathbf{#1}}
\newcommand{\cAlg}[1]{\ensuremath{#1\text{-}\catname{Alg}}}
\newcommand{\cFilt}[1]{\ensuremath{#1\text{-}\catname{Filt}}}
\newcommand{\cGrad}[1]{\ensuremath{#1\text{-}\catname{Grad}}}
\newcommand{\cLie}[1]{\ensuremath{#1\text{-}\catname{Lie}}}

% spaces and sets
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\centerlie}{Z}
\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\Mat}{M}
\DeclareMathOperator{\normallie}{N}
\DeclareMathOperator{\rad}{rad}
\newcommand{\Ue}{\mathop{\mathcal{U}}}
\DeclareMathOperator{\vspan}{span}

% functions
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\can}{can}
\DeclareMathOperator{\card}{card}
\DeclareMathOperator{\chara}{char}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\flt}{flt}
\DeclareMathOperator{\gr}{gr}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\tr}{tr}

% relations and operators
\newcommand{\defined}{\coloneqq}
\newcommand{\dotcup}{\mathrel{\mathaccent\cdot\cup}}
\newcommand{\inc}{\hookrightarrow}
\newcommand{\ideal}{\trianglelefteq}
\newcommand{\tensor}{\otimes}

% delimiters
\DeclarePairedDelimiter{\pair}{\langle}{\rangle}
\NewDocumentCommand{\suchthat}{s}{
  \IfBooleanTF{#1}
    {\,\middle|\,}
    {\mathrel{|}}       
}

% decorations
\newcommand{\vect}[1]{\begin{pmatrix}#1\end{pmatrix}}

% shortcuts
\newcommand{\dd}[1]{\frac{\text{d}}{\text{d}#1}}
\newcommand{\mc}[1]{\mathcal{#1}}





%%%%% GLOSSARY LIST
% glossary uses macros defined above
% input at the very end

\input{glossarylist}
